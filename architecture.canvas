{
  "nodes": [
    {
      "id": "layer_external",
      "type": "group",
      "x": -800,
      "y": -600,
      "width": 1600,
      "height": 200,
      "label": "ğŸŒ å¤–éƒ¨æ•°æ®æº",
      "color": "1"
    },
    {
      "id": "layer_data",
      "type": "group",
      "x": -800,
      "y": -350,
      "width": 1600,
      "height": 280,
      "label": "ğŸ“¥ æ•°æ®é‡‡é›†å±‚ (data-service)",
      "color": "4"
    },
    {
      "id": "layer_storage",
      "type": "group",
      "x": -800,
      "y": -20,
      "width": 1600,
      "height": 200,
      "label": "ğŸ’¾ å­˜å‚¨å±‚",
      "color": "3"
    },
    {
      "id": "layer_compute",
      "type": "group",
      "x": -800,
      "y": 230,
      "width": 1600,
      "height": 280,
      "label": "âš™ï¸ è®¡ç®—å±‚ (trading-service)",
      "color": "5"
    },
    {
      "id": "layer_presentation",
      "type": "group",
      "x": -800,
      "y": 560,
      "width": 1600,
      "height": 280,
      "label": "ğŸ“± å±•ç¤ºå±‚ (telegram-service)",
      "color": "6"
    },
    {
      "id": "binance_ws",
      "type": "text",
      "text": "**Binance WebSocket**\n`wss://fstream.binance.com`\n\n**æ ¸å¿ƒèŒè´£**: æ¨é€å®æ—¶ 1m Kçº¿æ•°æ®\n**æ•°æ®é¢‘ç‡**: ~300å¸ç§/åˆ†é’Ÿ\n**å¤æ‚åº¦**: Low",
      "x": -700,
      "y": -550,
      "width": 300,
      "height": 120,
      "color": "1"
    },
    {
      "id": "binance_rest",
      "type": "text",
      "text": "**Binance REST API**\n`api.binance.com`\n\n**æ ¸å¿ƒèŒè´£**: å†å²Kçº¿è¡¥é½ + æœŸè´§æŒ‡æ ‡\n**æ•°æ®ç±»å‹**: OI/èµ„é‡‘è´¹ç‡/å¤šç©ºæ¯”\n**å¤æ‚åº¦**: Low",
      "x": 100,
      "y": -550,
      "width": 300,
      "height": 120,
      "color": "1"
    },
    {
      "id": "ws_collector",
      "type": "text",
      "text": "**WSCollector**\n`collectors/ws.py`\n\n**æ ¸å¿ƒèŒè´£**: WebSocket Kçº¿å®æ—¶é‡‡é›†ï¼Œ3ç§’çª—å£æ‰¹é‡å†™å…¥\n**å…³é”®äº¤äº’**:\n- è°ƒç”¨: BinanceWSAdapter, TimescaleAdapter\n- è¢«ç”¨äº: å®æ—¶æ•°æ®å…¥åº“\n**å¤æ‚åº¦**: Medium\n**ç‰¹æ€§**: è‡ªåŠ¨é‡è¿ + ç¼ºå£å·¡æ£€",
      "x": -700,
      "y": -300,
      "width": 320,
      "height": 200,
      "color": "4"
    },
    {
      "id": "metrics_collector",
      "type": "text",
      "text": "**MetricsCollector**\n`collectors/metrics.py`\n\n**æ ¸å¿ƒèŒè´£**: é‡‡é›†æœŸè´§å¸‚åœºæŒ‡æ ‡\n**å…³é”®äº¤äº’**:\n- è°ƒç”¨: Binance REST API\n- è¢«ç”¨äº: OI/èµ„é‡‘è´¹ç‡/å¤šç©ºæ¯”\n**å¤æ‚åº¦**: Medium",
      "x": -300,
      "y": -300,
      "width": 300,
      "height": 180,
      "color": "4"
    },
    {
      "id": "backfill",
      "type": "text",
      "text": "**BackfillCollector**\n`collectors/backfill.py`\n\n**æ ¸å¿ƒèŒè´£**: å†å²Kçº¿æ•°æ®è¡¥é½\n**å…³é”®äº¤äº’**:\n- è°ƒç”¨: Binance REST API\n- è¢«ç”¨äº: ç¼ºå£ä¿®å¤\n**å¤æ‚åº¦**: High (36KB)",
      "x": 100,
      "y": -300,
      "width": 300,
      "height": 180,
      "color": "4"
    },
    {
      "id": "adapters",
      "type": "text",
      "text": "**Adapters**\n`adapters/`\n\n**æ ¸å¿ƒèŒè´£**: å¤–éƒ¨æœåŠ¡é€‚é…\n- ccxt: äº¤æ˜“æ‰€ç»Ÿä¸€æ¥å£\n- cryptofeed: WebSocketå°è£…\n- timescale: æ•°æ®åº“å†™å…¥\n**å¤æ‚åº¦**: Medium",
      "x": 500,
      "y": -300,
      "width": 280,
      "height": 180,
      "color": "4"
    },
    {
      "id": "timescaledb",
      "type": "text",
      "text": "**TimescaleDB**\n`market_data.candles_*`\n\n**æ ¸å¿ƒèŒè´£**: æ—¶åºæ•°æ®å­˜å‚¨\n**è¡¨ç»“æ„**:\n- candles_1m (åŸºç¡€è¡¨)\n- candles_5m/15m/1h/4h/1d/1w (è¿ç»­èšåˆ)\n- metrics_5m (æœŸè´§æŒ‡æ ‡)\n**ç‰¹æ€§**: è‡ªåŠ¨å‹ç¼© + 180å¤©ä¿ç•™",
      "x": -500,
      "y": 30,
      "width": 340,
      "height": 160,
      "color": "3"
    },
    {
      "id": "sqlite_cache",
      "type": "text",
      "text": "**SQLite Cache**\n`market_data.db`\n\n**æ ¸å¿ƒèŒè´£**: æŒ‡æ ‡è®¡ç®—ç»“æœç¼“å­˜\n**ç‰¹æ€§**: WALæ¨¡å¼ + æœ¬åœ°å¿«é€Ÿè¯»å–\n**è¢«ç”¨äº**: telegram-service æ’è¡Œæ¦œ",
      "x": 200,
      "y": 30,
      "width": 300,
      "height": 140,
      "color": "3"
    },
    {
      "id": "engine",
      "type": "text",
      "text": "**Engine**\n`core/engine.py`\n\n**æ ¸å¿ƒèŒè´£**: æŒ‡æ ‡è®¡ç®—å¼•æ“ï¼ˆé«˜æ€§èƒ½ç‰ˆï¼‰\n**å…³é”®äº¤äº’**:\n- è°ƒç”¨: DataReader, æ‰€æœ‰Indicators\n- è¢«ç”¨äº: å®šæ—¶ä»»åŠ¡/ä¸€æ¬¡æ€§è®¡ç®—\n**å¤æ‚åº¦**: High (17KB)\n**ç‰¹æ€§**: å¤šè¿›ç¨‹å¹¶è¡Œ + è¿›ç¨‹æ± å¤ç”¨",
      "x": -700,
      "y": 280,
      "width": 340,
      "height": 200,
      "color": "5"
    },
    {
      "id": "async_engine",
      "type": "text",
      "text": "**AsyncFullEngine**\n`core/async_full_engine.py`\n\n**æ ¸å¿ƒèŒè´£**: å®Œå…¨å¼‚æ­¥æŒç»­è¿è¡Œå¼•æ“\n**å¤æ‚åº¦**: High (25KB)\n**ç‰¹æ€§**: é«˜ä½ä¼˜å…ˆçº§é˜Ÿåˆ—åˆ†ç¦»",
      "x": -300,
      "y": 280,
      "width": 300,
      "height": 140,
      "color": "5"
    },
    {
      "id": "indicators",
      "type": "text",
      "text": "**Indicators**\n`indicators/batch/` + `indicators/incremental/`\n\n**æ ¸å¿ƒèŒè´£**: 38ä¸ªæŠ€æœ¯æŒ‡æ ‡è®¡ç®—\n**æ‰¹é‡æŒ‡æ ‡**: VPVR, å¸ƒæ—å¸¦, è¶‹åŠ¿çº¿, Kçº¿å½¢æ€...\n**å¢é‡æŒ‡æ ‡**: EMA, MACD, KDJ, ATR, CVD...\n**å¤æ‚åº¦**: High\n**ç‰¹æ€§**: @register è£…é¥°å™¨è‡ªåŠ¨æ³¨å†Œ",
      "x": 100,
      "y": 280,
      "width": 340,
      "height": 200,
      "color": "5"
    },
    {
      "id": "data_reader",
      "type": "text",
      "text": "**DataReader**\n`db/reader.py`\n\n**æ ¸å¿ƒèŒè´£**: ä»TimescaleDBè¯»å–Kçº¿\n**ç‰¹æ€§**: è¿æ¥æ±  + å¤šå‘¨æœŸå¹¶è¡ŒæŸ¥è¯¢\n**å¤æ‚åº¦**: Medium (14KB)",
      "x": 500,
      "y": 280,
      "width": 280,
      "height": 140,
      "color": "5"
    },
    {
      "id": "telegram_bot",
      "type": "text",
      "text": "**TelegramBot**\n`bot/app.py`\n\n**æ ¸å¿ƒèŒè´£**: Telegram Bot ä¸»ç¨‹åº\n**å…³é”®äº¤äº’**:\n- è°ƒç”¨: RankingRegistry, DataProvider\n- è¢«ç”¨äº: ç”¨æˆ·äº¤äº’å…¥å£\n**å¤æ‚åº¦**: Critical (265KB)\n**âš ï¸ æ½œåœ¨é£é™©**: æŠ€æœ¯å€ºåŠ¡è¾ƒé«˜ï¼Œå»ºè®®æ‹†åˆ†",
      "x": -700,
      "y": 610,
      "width": 360,
      "height": 200,
      "color": "6"
    },
    {
      "id": "ranking_registry",
      "type": "text",
      "text": "**RankingRegistry**\n`cards/registry.py`\n\n**æ ¸å¿ƒèŒè´£**: æ’è¡Œæ¦œå¡ç‰‡è‡ªåŠ¨æ³¨å†Œ\n**å…³é”®äº¤äº’**:\n- è°ƒç”¨: æ‰€æœ‰ RankingCard æ’ä»¶\n- è¢«ç”¨äº: Bot èœå•ç”Ÿæˆ\n**å¤æ‚åº¦**: Medium (15KB)",
      "x": -250,
      "y": 610,
      "width": 300,
      "height": 180,
      "color": "6"
    },
    {
      "id": "ranking_cards",
      "type": "text",
      "text": "**RankingCards**\n`cards/basic/` + `cards/advanced/` + `cards/futures/`\n\n**æ ¸å¿ƒèŒè´£**: 40+ æ’è¡Œæ¦œå¡ç‰‡æ’ä»¶\n**åˆ†ç±»**:\n- basic: KDJ, RSI, MACD, å¸ƒæ—å¸¦...\n- advanced: EMA, VPVR, VWAP, è¶‹åŠ¿çº¿...\n- futures: æŒä»“, èµ„é‡‘è´¹ç‡, å¤šç©ºæ¯”...\n**å¤æ‚åº¦**: Medium",
      "x": 120,
      "y": 610,
      "width": 340,
      "height": 200,
      "color": "6"
    },
    {
      "id": "data_provider",
      "type": "text",
      "text": "**DataProvider**\n`cards/data_provider.py`\n\n**æ ¸å¿ƒèŒè´£**: æ’è¡Œæ¦œæ•°æ®è®¿é—®å±‚\n**æ•°æ®æº**: SQLite + CSV\n**å¤æ‚åº¦**: Medium (19KB)",
      "x": 530,
      "y": 610,
      "width": 260,
      "height": 140,
      "color": "6"
    },
    {
      "id": "libs_common",
      "type": "text",
      "text": "**libs/common**\n`utils/è·¯å¾„åŠ©æ‰‹.py`\n\n**æ ¸å¿ƒèŒè´£**: å…±äº«å·¥å…·å‡½æ•°\n- ä»“åº“/æœåŠ¡è·¯å¾„è§£æ\n- ç›®å½•ç¡®ä¿\n**è¢«ç”¨äº**: æ‰€æœ‰æœåŠ¡",
      "x": -800,
      "y": 900,
      "width": 260,
      "height": 140,
      "color": "2"
    },
    {
      "id": "libs_database",
      "type": "text",
      "text": "**libs/database**\n`db/schema/*.sql`\n\n**æ ¸å¿ƒèŒè´£**: æ•°æ®åº“Schemaå®šä¹‰\n- TimescaleDB è¶…è¡¨\n- è¿ç»­èšåˆ\n- å‹ç¼©/ä¿ç•™ç­–ç•¥\n**è¢«ç”¨äº**: data-service",
      "x": -480,
      "y": 900,
      "width": 260,
      "height": 140,
      "color": "2"
    },
    {
      "id": "user",
      "type": "text",
      "text": "**ğŸ‘¤ ç”¨æˆ·**\n\nTelegram å®¢æˆ·ç«¯",
      "x": -700,
      "y": 1100,
      "width": 160,
      "height": 80,
      "color": "0"
    }
  ],
  "edges": [
    {
      "id": "edge_binance_ws_to_ws_collector",
      "fromNode": "binance_ws",
      "fromSide": "bottom",
      "toNode": "ws_collector",
      "toSide": "top",
      "label": "WebSocket"
    },
    {
      "id": "edge_binance_rest_to_metrics",
      "fromNode": "binance_rest",
      "fromSide": "bottom",
      "toNode": "metrics_collector",
      "toSide": "top",
      "label": "REST API"
    },
    {
      "id": "edge_binance_rest_to_backfill",
      "fromNode": "binance_rest",
      "fromSide": "bottom",
      "toNode": "backfill",
      "toSide": "top",
      "label": "REST API"
    },
    {
      "id": "edge_ws_to_adapters",
      "fromNode": "ws_collector",
      "fromSide": "right",
      "toNode": "adapters",
      "toSide": "left"
    },
    {
      "id": "edge_metrics_to_adapters",
      "fromNode": "metrics_collector",
      "fromSide": "right",
      "toNode": "adapters",
      "toSide": "left"
    },
    {
      "id": "edge_backfill_to_adapters",
      "fromNode": "backfill",
      "fromSide": "right",
      "toNode": "adapters",
      "toSide": "left"
    },
    {
      "id": "edge_ws_to_timescale",
      "fromNode": "ws_collector",
      "fromSide": "bottom",
      "toNode": "timescaledb",
      "toSide": "top",
      "label": "æ‰¹é‡å†™å…¥"
    },
    {
      "id": "edge_metrics_to_timescale",
      "fromNode": "metrics_collector",
      "fromSide": "bottom",
      "toNode": "timescaledb",
      "toSide": "top"
    },
    {
      "id": "edge_backfill_to_timescale",
      "fromNode": "backfill",
      "fromSide": "bottom",
      "toNode": "timescaledb",
      "toSide": "top"
    },
    {
      "id": "edge_timescale_to_reader",
      "fromNode": "timescaledb",
      "fromSide": "bottom",
      "toNode": "data_reader",
      "toSide": "top",
      "label": "è¿æ¥æ± è¯»å–"
    },
    {
      "id": "edge_reader_to_engine",
      "fromNode": "data_reader",
      "fromSide": "left",
      "toNode": "engine",
      "toSide": "right"
    },
    {
      "id": "edge_engine_to_indicators",
      "fromNode": "engine",
      "fromSide": "right",
      "toNode": "indicators",
      "toSide": "left",
      "label": "å¤šè¿›ç¨‹è®¡ç®—"
    },
    {
      "id": "edge_async_to_indicators",
      "fromNode": "async_engine",
      "fromSide": "right",
      "toNode": "indicators",
      "toSide": "left"
    },
    {
      "id": "edge_engine_to_sqlite",
      "fromNode": "engine",
      "fromSide": "top",
      "toNode": "sqlite_cache",
      "toSide": "bottom",
      "label": "å†™å…¥ç»“æœ"
    },
    {
      "id": "edge_sqlite_to_provider",
      "fromNode": "sqlite_cache",
      "fromSide": "bottom",
      "toNode": "data_provider",
      "toSide": "top",
      "label": "è¯»å–æŒ‡æ ‡"
    },
    {
      "id": "edge_provider_to_cards",
      "fromNode": "data_provider",
      "fromSide": "left",
      "toNode": "ranking_cards",
      "toSide": "right"
    },
    {
      "id": "edge_cards_to_registry",
      "fromNode": "ranking_cards",
      "fromSide": "left",
      "toNode": "ranking_registry",
      "toSide": "right",
      "label": "è‡ªåŠ¨æ³¨å†Œ"
    },
    {
      "id": "edge_registry_to_bot",
      "fromNode": "ranking_registry",
      "fromSide": "left",
      "toNode": "telegram_bot",
      "toSide": "right"
    },
    {
      "id": "edge_user_to_bot",
      "fromNode": "user",
      "fromSide": "top",
      "toNode": "telegram_bot",
      "toSide": "bottom",
      "label": "å‘½ä»¤/å›è°ƒ"
    },
    {
      "id": "edge_libs_common_to_all",
      "fromNode": "libs_common",
      "fromSide": "top",
      "toNode": "telegram_bot",
      "toSide": "bottom"
    },
    {
      "id": "edge_libs_db_to_timescale",
      "fromNode": "libs_database",
      "fromSide": "top",
      "toNode": "timescaledb",
      "toSide": "bottom",
      "label": "Schemaå®šä¹‰"
    }
  ]
}
